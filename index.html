<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Korin Emberfall â€” The Last Spark of Hope</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
:root {
  --bg: #1a1a2e;
  --card: #16213e;
  --card-hover: #1a2744;
  --accent: #e94560;
  --gold: #ffd700;
  --heal: #00cc88;
  --blue: #4488ff;
  --text: #e0e0e0;
  --dim: #888;
  --border: #2a2a4a;
  --radiant: #ffdd44;
  --necrotic: #7744aa;
}
body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Segoe UI', system-ui, sans-serif;
  font-size: 14px;
  padding: 8px;
  max-width: 800px;
  margin: 0 auto;
  -webkit-user-select: none;
  user-select: none;
}

/* Header */
.header {
  text-align: center;
  padding: 12px 0 8px;
  border-bottom: 1px solid var(--border);
  margin-bottom: 8px;
}
.header h1 { font-size: 18px; color: var(--gold); margin-bottom: 2px; }
.header .subtitle { font-size: 11px; color: var(--dim); font-style: italic; }
.header .class-info { font-size: 12px; color: var(--accent); margin-top: 4px; }

/* HP Bar */
.hp-bar-container {
  background: #111;
  border-radius: 8px;
  padding: 8px 12px;
  margin: 8px 0;
  display: flex;
  align-items: center;
  gap: 10px;
}
.hp-label { font-size: 12px; color: var(--dim); white-space: nowrap; }
.hp-bar {
  flex: 1;
  height: 20px;
  background: #333;
  border-radius: 10px;
  overflow: hidden;
  position: relative;
}
.hp-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, #cc3344, #44cc66);
  border-radius: 10px;
  transition: width 0.3s;
}
.hp-text {
  font-size: 16px;
  font-weight: bold;
  min-width: 60px;
  text-align: right;
}
.hp-controls { display: flex; gap: 4px; }
.hp-btn {
  width: 28px; height: 28px;
  border-radius: 50%;
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--text);
  font-size: 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}
.hp-btn:active { background: var(--accent); }

/* Quick Stats Row */
.stats-row {
  display: flex;
  gap: 4px;
  margin-bottom: 8px;
}
.stat-box {
  flex: 1;
  background: var(--card);
  border-radius: 6px;
  padding: 6px 4px;
  text-align: center;
}
.stat-box .label { font-size: 9px; color: var(--dim); text-transform: uppercase; }
.stat-box .value { font-size: 16px; font-weight: bold; }

/* Section */
.section { margin-bottom: 8px; }
.section-title {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--accent);
  padding: 4px 0;
  border-bottom: 1px solid var(--border);
  margin-bottom: 4px;
}

/* Ability cards */
.ability {
  background: var(--card);
  border-radius: 6px;
  padding: 8px 10px;
  margin-bottom: 4px;
  cursor: pointer;
  border-left: 3px solid var(--border);
  transition: background 0.15s;
  display: flex;
  align-items: center;
  gap: 8px;
}
.ability:hover, .ability:active { background: var(--card-hover); }
.ability.used { opacity: 0.4; }
.ability.heal { border-left-color: var(--heal); }
.ability.attack { border-left-color: var(--accent); }
.ability.buff { border-left-color: var(--blue); }
.ability.racial { border-left-color: var(--radiant); }
.ability.spell { border-left-color: #aa66ff; }

.ability-info { flex: 1; }
.ability-name { font-size: 13px; font-weight: 600; }
.ability-brief { font-size: 10px; color: var(--dim); margin-top: 1px; }
.ability-meta { font-size: 10px; color: var(--dim); }

.uses {
  display: flex;
  gap: 3px;
}
.use-pip {
  width: 14px; height: 14px;
  border-radius: 50%;
  border: 2px solid var(--dim);
  cursor: pointer;
  transition: all 0.15s;
}
.use-pip.filled { background: var(--gold); border-color: var(--gold); }
.use-pip:hover { border-color: var(--gold); }

/* Spell Slots */
.spell-slots {
  display: flex;
  gap: 6px;
  margin-bottom: 4px;
  align-items: center;
}
.slot-group { display: flex; align-items: center; gap: 4px; }
.slot-label { font-size: 10px; color: var(--dim); }
.slot-pip {
  width: 18px; height: 18px;
  border-radius: 4px;
  border: 2px solid #aa66ff;
  cursor: pointer;
  transition: all 0.15s;
}
.slot-pip.filled { background: #aa66ff; }
.slot-pip:hover { border-color: #cc88ff; }

/* Detail tooltip */
.detail-overlay {
  display: none;
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.85);
  z-index: 100;
  padding: 20px;
  overflow-y: auto;
}
.detail-overlay.show { display: block; }
.detail-card {
  background: var(--card);
  border-radius: 10px;
  padding: 16px;
  max-width: 400px;
  margin: 40px auto;
  border: 1px solid var(--border);
}
.detail-card h2 { font-size: 16px; color: var(--gold); margin-bottom: 8px; }
.detail-card .meta { font-size: 11px; color: var(--accent); margin-bottom: 8px; }
.detail-card p { font-size: 13px; line-height: 1.5; margin-bottom: 8px; }
.detail-card .close-hint { font-size: 10px; color: var(--dim); text-align: center; margin-top: 12px; }

/* Dice roller */
.dice-bar {
  display: flex;
  gap: 4px;
  margin: 8px 0;
  flex-wrap: wrap;
}
.dice-btn {
  padding: 6px 10px;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 6px;
  color: var(--text);
  font-size: 12px;
  cursor: pointer;
}
.dice-btn:active { background: var(--accent); }
.dice-result {
  text-align: center;
  font-size: 24px;
  font-weight: bold;
  color: var(--gold);
  min-height: 36px;
  line-height: 36px;
}

/* Long rest */
.long-rest-btn {
  width: 100%;
  padding: 10px;
  background: #1a3a2a;
  border: 1px solid #2a5a3a;
  border-radius: 8px;
  color: var(--heal);
  font-size: 13px;
  cursor: pointer;
  text-align: center;
  margin-top: 8px;
}
.long-rest-btn:active { background: #2a5a3a; }

/* Responsive tweaks */
@media (max-width: 360px) {
  body { font-size: 12px; }
  .ability-name { font-size: 12px; }
}
</style>
</head>
<body>

<div class="header">
  <h1>âš”ï¸ Korin Emberfall</h1>
  <div class="subtitle">"The Last Spark of Hope"</div>
  <div class="class-info">Aasimar Cleric 4 Â· Light Domain Â· Icewind Dale</div>
</div>

<!-- HP -->
<div class="hp-bar-container">
  <span class="hp-label">HP</span>
  <div class="hp-bar"><div class="hp-bar-fill" id="hpFill"></div></div>
  <span class="hp-text" id="hpText">25/31</span>
  <div class="hp-controls">
    <button class="hp-btn" onclick="changeHP(-1)">âˆ’</button>
    <button class="hp-btn" onclick="changeHP(1)">+</button>
  </div>
</div>

<!-- Quick Stats -->
<div class="stats-row">
  <div class="stat-box"><div class="label">AC</div><div class="value">16</div></div>
  <div class="stat-box"><div class="label">Init</div><div class="value">+1</div></div>
  <div class="stat-box"><div class="label">Speed</div><div class="value">30</div></div>
  <div class="stat-box"><div class="label">Prof</div><div class="value">+2</div></div>
  <div class="stat-box"><div class="label">Spell DC</div><div class="value">13</div></div>
  <div class="stat-box"><div class="label">Spell Atk</div><div class="value">+5</div></div>
</div>

<!-- Spell Slots -->
<div class="section">
  <div class="section-title">Spell Slots</div>
  <div class="spell-slots">
    <div class="slot-group">
      <span class="slot-label">1st</span>
      <div class="slot-pip filled" onclick="toggleSlot(this)"></div>
      <div class="slot-pip filled" onclick="toggleSlot(this)"></div>
      <div class="slot-pip filled" onclick="toggleSlot(this)"></div>
      <div class="slot-pip filled" onclick="toggleSlot(this)"></div>
    </div>
    <div class="slot-group">
      <span class="slot-label">2nd</span>
      <div class="slot-pip filled" onclick="toggleSlot(this)"></div>
      <div class="slot-pip filled" onclick="toggleSlot(this)"></div>
      <div class="slot-pip filled" onclick="toggleSlot(this)"></div>
    </div>
  </div>
</div>

<!-- Racial / Class Features -->
<div class="section">
  <div class="section-title">Features & Abilities</div>
  
  <div class="ability racial" onclick="showDetail('healingHands')">
    <div class="ability-info">
      <div class="ability-name">ğŸ¤² Healing Hands</div>
      <div class="ability-brief">Touch Â· Heal 2d4 HP Â· Magic Action</div>
    </div>
    <div class="uses" id="healingHandsUses">
      <div class="use-pip filled" onclick="event.stopPropagation(); togglePip(this)"></div>
    </div>
  </div>

  <div class="ability racial" onclick="showDetail('celestialRevelation')">
    <div class="ability-info">
      <div class="ability-name">âœ¨ Celestial Revelation</div>
      <div class="ability-brief">Bonus Action Â· 1 min Â· Extra radiant dmg</div>
    </div>
    <div class="uses" id="celestialUses">
      <div class="use-pip filled" onclick="event.stopPropagation(); togglePip(this)"></div>
    </div>
  </div>

  <div class="ability buff" onclick="showDetail('channelDivinity')">
    <div class="ability-info">
      <div class="ability-name">ğŸ”† Channel Divinity</div>
      <div class="ability-brief">Turn Undead OR Radiance of the Dawn</div>
    </div>
    <div class="uses" id="channelUses">
      <div class="use-pip filled" onclick="event.stopPropagation(); togglePip(this)"></div>
    </div>
  </div>

  <div class="ability attack" onclick="showDetail('wardingFlare')">
    <div class="ability-info">
      <div class="ability-name">ğŸ’¥ Warding Flare</div>
      <div class="ability-brief">Reaction Â· Impose disadvantage on attacker</div>
    </div>
    <div class="uses" id="wardingFlareUses">
      <div class="use-pip filled" onclick="event.stopPropagation(); togglePip(this)"></div>
      <div class="use-pip filled" onclick="event.stopPropagation(); togglePip(this)"></div>
      <div class="use-pip filled" onclick="event.stopPropagation(); togglePip(this)"></div>
    </div>
  </div>

  <div class="ability buff" onclick="showDetail('celestialResistance')">
    <div class="ability-info">
      <div class="ability-name">ğŸ›¡ï¸ Celestial Resistance</div>
      <div class="ability-brief">Resist necrotic & radiant damage</div>
    </div>
    <div class="ability-meta">Passive</div>
  </div>

  <div class="ability buff" onclick="showDetail('lightBearer')">
    <div class="ability-info">
      <div class="ability-name">ğŸ’¡ Light Bearer</div>
      <div class="ability-brief">Light cantrip (CHA) Â· At will</div>
    </div>
    <div class="ability-meta">âˆ</div>
  </div>

  <div class="ability buff" onclick="showDetail('darkvision')">
    <div class="ability-info">
      <div class="ability-name">ğŸ‘ï¸ Darkvision</div>
      <div class="ability-brief">See 60 ft in dim/dark</div>
    </div>
    <div class="ability-meta">Passive</div>
  </div>
</div>

<!-- Cantrips -->
<div class="section">
  <div class="section-title">Cantrips (at will)</div>
  
  <div class="ability spell" onclick="showDetail('sacredFlame')">
    <div class="ability-info">
      <div class="ability-name">ğŸ”¥ Sacred Flame</div>
      <div class="ability-brief">60 ft Â· DEX save Â· 1d8 radiant</div>
    </div>
    <div class="ability-meta">âˆ</div>
  </div>

  <div class="ability spell" onclick="showDetail('spareTheDying')">
    <div class="ability-info">
      <div class="ability-name">ğŸ«€ Spare the Dying</div>
      <div class="ability-brief">Touch Â· Stabilize creature at 0 HP</div>
    </div>
    <div class="ability-meta">âˆ</div>
  </div>

  <div class="ability spell" onclick="showDetail('guidance')">
    <div class="ability-info">
      <div class="ability-name">ğŸ™ Guidance</div>
      <div class="ability-brief">Touch Â· +1d4 to one ability check</div>
    </div>
    <div class="ability-meta">âˆ</div>
  </div>

  <div class="ability spell" onclick="showDetail('tollTheDead')">
    <div class="ability-info">
      <div class="ability-name">ğŸ”” Toll the Dead</div>
      <div class="ability-brief">60 ft Â· WIS save Â· 1d8/1d12 necrotic</div>
    </div>
    <div class="ability-meta">âˆ</div>
  </div>

  <div class="ability spell" onclick="showDetail('light')">
    <div class="ability-info">
      <div class="ability-name">ğŸ’¡ Light</div>
      <div class="ability-brief">Touch Â· Object sheds bright light 20 ft</div>
    </div>
    <div class="ability-meta">âˆ</div>
  </div>
</div>

<!-- Prepared Spells -->
<div class="section">
  <div class="section-title">Domain Spells (always prepared â€” Light)</div>

  <div class="ability attack" onclick="showDetail('burningHands')">
    <div class="ability-info">
      <div class="ability-name">ğŸ”¥ Burning Hands</div>
      <div class="ability-brief">Self (15ft cone) Â· DEX save Â· 3d6 fire</div>
    </div>
    <div class="ability-meta">1st</div>
  </div>

  <div class="ability buff" onclick="showDetail('faerieFire')">
    <div class="ability-info">
      <div class="ability-name">âœ¨ Faerie Fire</div>
      <div class="ability-brief">Conc Â· 60 ft Â· DEX save Â· Advantage on attacks</div>
    </div>
    <div class="ability-meta">1st</div>
  </div>

  <div class="ability attack" onclick="showDetail('flamingSphere')">
    <div class="ability-info">
      <div class="ability-name">ğŸ”´ Flaming Sphere</div>
      <div class="ability-brief">Conc Â· 60 ft Â· Bonus Action to ram Â· 2d6 fire</div>
    </div>
    <div class="ability-meta">2nd</div>
  </div>

  <div class="ability attack" onclick="showDetail('scorchingRay')">
    <div class="ability-info">
      <div class="ability-name">ğŸ”¥ğŸ”¥ Scorching Ray</div>
      <div class="ability-brief">120 ft Â· 3 rays Â· Ranged spell atk Â· 2d6 fire each</div>
    </div>
    <div class="ability-meta">2nd</div>
  </div>

  <div class="section-title">Prepared Spells (choose 7 â€” edit as needed)</div>

  <div class="ability heal" onclick="showDetail('healingWord')">
    <div class="ability-info">
      <div class="ability-name">ğŸ’š Healing Word</div>
      <div class="ability-brief">Bonus Action Â· 60 ft Â· 2d4+3 HP</div>
    </div>
    <div class="ability-meta">1st</div>
  </div>

  <div class="ability heal" onclick="showDetail('cureWounds')">
    <div class="ability-info">
      <div class="ability-name">ğŸ’š Cure Wounds</div>
      <div class="ability-brief">Touch Â· 2d8+3 HP</div>
    </div>
    <div class="ability-meta">1st</div>
  </div>

  <div class="ability buff" onclick="showDetail('bless')">
    <div class="ability-info">
      <div class="ability-name">ğŸ™Œ Bless</div>
      <div class="ability-brief">Conc Â· 3 creatures Â· +1d4 atk & saves</div>
    </div>
    <div class="ability-meta">1st</div>
  </div>

  <div class="ability buff" onclick="showDetail('shieldOfFaith')">
    <div class="ability-info">
      <div class="ability-name">ğŸ›¡ï¸ Shield of Faith</div>
      <div class="ability-brief">Bonus Action Â· Conc Â· +2 AC</div>
    </div>
    <div class="ability-meta">1st</div>
  </div>

  <div class="ability attack" onclick="showDetail('guidingBolt')">
    <div class="ability-info">
      <div class="ability-name">âš¡ Guiding Bolt</div>
      <div class="ability-brief">120 ft Â· Ranged spell atk Â· 4d6 radiant</div>
    </div>
    <div class="ability-meta">1st</div>
  </div>

  <div class="ability buff" onclick="showDetail('spiritualWeapon')">
    <div class="ability-info">
      <div class="ability-name">âš”ï¸ Spiritual Weapon</div>
      <div class="ability-brief">Bonus Action Â· 60 ft Â· 1d8+3 force Â· NOT conc!</div>
    </div>
    <div class="ability-meta">2nd</div>
  </div>

  <div class="ability buff" onclick="showDetail('holdPerson')">
    <div class="ability-info">
      <div class="ability-name">âœ‹ Hold Person</div>
      <div class="ability-brief">Conc Â· 60 ft Â· WIS save Â· Paralyzed</div>
    </div>
    <div class="ability-meta">2nd</div>
  </div>
</div>

<!-- Dice Roller -->
<div class="section">
  <div class="section-title">Quick Roll</div>
  <div class="dice-result" id="diceResult">â€”</div>
  <div class="dice-bar">
    <button class="dice-btn" onclick="roll(20,1,0)">d20</button>
    <button class="dice-btn" onclick="roll(20,1,5)">Atk +5</button>
    <button class="dice-btn" onclick="roll(8,1,0)">d8</button>
    <button class="dice-btn" onclick="roll(6,4,0)">4d6</button>
    <button class="dice-btn" onclick="roll(4,2,3)">Heal 2d4+3</button>
    <button class="dice-btn" onclick="roll(4,1,0)">d4</button>
    <button class="dice-btn" onclick="roll(8,2,3)">Cure 2d8+3</button>
  </div>
</div>

<!-- Long Rest -->
<button class="long-rest-btn" onclick="longRest()">ğŸŒ™ Long Rest â€” Restore All</button>

<!-- Detail Overlay -->
<div class="detail-overlay" id="detailOverlay" onclick="hideDetail()">
  <div class="detail-card" onclick="event.stopPropagation()">
    <h2 id="detailTitle"></h2>
    <div class="meta" id="detailMeta"></div>
    <div id="detailBody"></div>
    <div class="close-hint">tap outside to close</div>
  </div>
</div>

<script>
// State
let hp = 25;
const maxHP = 31;

function updateHP() {
  document.getElementById('hpText').textContent = `${hp}/${maxHP}`;
  const pct = (hp / maxHP) * 100;
  const fill = document.getElementById('hpFill');
  fill.style.width = pct + '%';
  fill.style.background = pct > 50 ? '#44cc66' : pct > 25 ? '#ccaa33' : '#cc3344';
}

function changeHP(delta) {
  hp = Math.max(0, Math.min(maxHP, hp + delta));
  updateHP();
  save();
}

function toggleSlot(el) { el.classList.toggle('filled'); save(); }
function togglePip(el) { el.classList.toggle('filled'); save(); }

function roll(sides, count, mod) {
  let total = 0;
  let rolls = [];
  for (let i = 0; i < count; i++) {
    const r = Math.floor(Math.random() * sides) + 1;
    rolls.push(r);
    total += r;
  }
  total += mod;
  const modStr = mod ? `+${mod}` : '';
  const natStr = count === 1 && sides === 20 ? (rolls[0] === 20 ? ' NAT 20! ğŸ‰' : rolls[0] === 1 ? ' NAT 1... ğŸ’€' : '') : '';
  document.getElementById('diceResult').textContent = `${total} [${rolls.join('+')}${modStr}]${natStr}`;
  document.getElementById('diceResult').style.color = natStr.includes('20') ? '#00ff88' : natStr.includes('1') ? '#ff4444' : '#ffd700';
}

function longRest() {
  hp = maxHP;
  updateHP();
  document.querySelectorAll('.slot-pip, .use-pip').forEach(p => p.classList.add('filled'));
  document.getElementById('diceResult').textContent = 'ğŸŒ™ Fully restored!';
  document.getElementById('diceResult').style.color = '#00cc88';
  save();
}

// Detail descriptions
const details = {
  healingHands: {
    title: 'ğŸ¤² Healing Hands',
    meta: 'Aasimar Racial Â· Magic Action Â· 1/Long Rest',
    body: `<p>As a Magic action, you touch a creature and roll a number of d4s equal to your Proficiency Bonus (2d4). The creature regains Hit Points equal to the total rolled.</p><p>Once you use this trait, you can't use it again until you finish a Long Rest.</p>`
  },
  celestialRevelation: {
    title: 'âœ¨ Celestial Revelation',
    meta: 'Aasimar Racial Â· Bonus Action Â· 1 minute Â· 1/Long Rest',
    body: `<p>As a Bonus Action, you can unleash your celestial nature. Choose one of three forms:</p>
    <p><b>Heavenly Wings:</b> Spectral wings appear. Fly speed equal to walking speed.</p>
    <p><b>Inner Radiance:</b> At end of each of your turns, you and allies within 10 ft regain HP equal to your CHA mod (1).</p>
    <p><b>Necrotic Shroud:</b> Enemies within 10 ft must make CHA save (DC 11) or be Frightened of you until end of your next turn. Once per turn, deal extra necrotic damage = Prof Bonus (+2).</p>
    <p>While transformed, once per turn you deal extra radiant damage equal to your Proficiency Bonus (+2) to one target when you deal damage.</p>`
  },
  channelDivinity: {
    title: 'ğŸ”† Channel Divinity',
    meta: 'Cleric Feature Â· Action Â· 1/Short or Long Rest',
    body: `<p>Choose ONE when you use it:</p>
    <p><b>Turn Undead:</b> Each undead within 30 ft that can see/hear you must make a WIS saving throw (DC 13). On fail, it is turned for 1 minute â€” must Dash away from you, can't willingly move within 30 ft of you.</p>
    <p><b>Radiance of the Dawn (Light Domain):</b> As an Action, you present your holy symbol and any magical darkness within 30 ft is dispelled. Each hostile creature within 30 ft must make a CON saving throw (DC 13). On fail: 2d10 + 4 (Cleric level) radiant damage. On success: half damage. Doesn't affect allies!</p>
    <p>Recharges on a Short or Long Rest.</p>`
  },
  wardingFlare: {
    title: 'ğŸ’¥ Warding Flare',
    meta: 'Light Domain Â· Reaction Â· WIS mod (3)/Long Rest',
    body: `<p>When you are attacked by a creature within 30 feet that you can see, you can use your Reaction to impose disadvantage on the attack roll, causing light to flare before the attacker.</p>
    <p>An attacker that can't be Blinded is immune to this feature.</p>
    <p>You can use this feature a number of times equal to your WIS modifier (3). You regain all expended uses on a Long Rest.</p>`
  },
  burningHands: {
    title: 'ğŸ”¥ Burning Hands',
    meta: '1st Level Evocation Â· V, S Â· Self (15 ft cone) Â· Instant',
    body: `<p>A thin sheet of flames shoots forth from your fingertips. Each creature in a 15-foot cone must make a DEX saving throw (DC 13). On fail: 3d6 fire damage. On success: half damage.</p><p>The fire ignites any flammable objects in the area that aren't being worn or carried.</p><p><b>At Higher Levels:</b> +1d6 per slot above 1st.</p>`
  },
  faerieFire: {
    title: 'âœ¨ Faerie Fire',
    meta: '1st Level Evocation Â· V Â· Conc, 1 min Â· 60 ft (20 ft cube)',
    body: `<p>Each object in a 20-foot cube within range is outlined in blue, green, or violet light (your choice). Any creature in the area when the spell is cast must succeed on a DEX saving throw (DC 13) or be outlined too.</p><p>For the duration, objects and affected creatures shed dim light in a 10-foot radius. Any attack roll against an affected creature or object has <b>advantage</b> if the attacker can see it, and the affected creature or object can't benefit from being invisible.</p><p><b>Great against invisible enemies in Icewind Dale!</b></p>`
  },
  flamingSphere: {
    title: 'ğŸ”´ Flaming Sphere',
    meta: '2nd Level Evocation Â· V, S, M Â· Conc, 1 min Â· 60 ft',
    body: `<p>A 5-foot-diameter sphere of fire appears in an unoccupied space within range. Any creature that ends its turn within 5 feet of the sphere must make a DEX saving throw (DC 13): 2d6 fire damage on fail, half on success.</p><p>As a <b>Bonus Action</b>, you can move the sphere up to 30 feet. If you ram it into a creature, that creature makes the save, and the sphere stops.</p><p><b>At Higher Levels:</b> +1d6 per slot above 2nd.</p><p><b>Tip:</b> Uses concentration, so can't pair with Bless or Faerie Fire. But Spiritual Weapon + Flaming Sphere = double bonus action value!</p>`
  },
  scorchingRay: {
    title: 'ğŸ”¥ğŸ”¥ Scorching Ray',
    meta: '2nd Level Evocation Â· V, S Â· Action Â· 120 ft',
    body: `<p>You create three rays of fire and hurl them at targets within range. You can hurl them at one target or several. Make a ranged spell attack (+5) for each ray. On hit: 2d6 fire damage per ray.</p><p><b>At Higher Levels:</b> +1 ray per slot above 2nd.</p><p><b>Max damage:</b> 3 Ã— 2d6 = 6d6 (avg 21) fire damage if all three hit. Your biggest single-turn damage spell right now!</p>`
  },
  celestialResistance: {
    title: 'ğŸ›¡ï¸ Celestial Resistance',
    meta: 'Aasimar Racial Â· Passive',
    body: '<p>You have resistance to Necrotic damage and Radiant damage. When you take either damage type, it is halved.</p>'
  },
  lightBearer: {
    title: 'ğŸ’¡ Light Bearer',
    meta: 'Aasimar Racial Â· Cantrip Â· At Will',
    body: '<p>You know the Light cantrip. Charisma is your spellcasting ability for it. You can cast it at will without using a spell slot.</p>'
  },
  darkvision: {
    title: 'ğŸ‘ï¸ Darkvision',
    meta: 'Aasimar Racial Â· Passive',
    body: '<p>You can see in dim light within 60 feet as if it were bright light, and in darkness as if it were dim light. You discern colors in that darkness only as shades of gray.</p>'
  },
  sacredFlame: {
    title: 'ğŸ”¥ Sacred Flame',
    meta: 'Evocation Cantrip Â· V, S Â· 60 ft Â· Instant',
    body: '<p>Flame-like radiance descends on a creature you can see within range. The target must succeed on a DEX saving throw (DC 13) or take 1d8 radiant damage. The target gains no benefit from cover for this save.</p><p>Damage increases at 5th level (2d8).</p>'
  },
  spareTheDying: {
    title: 'ğŸ«€ Spare the Dying',
    meta: 'Necromancy Cantrip Â· V, S Â· Touch Â· Instant',
    body: '<p>You touch a living creature that has 0 HP. The creature becomes stable. This spell has no effect on undead or constructs.</p>'
  },
  guidance: {
    title: 'ğŸ™ Guidance',
    meta: 'Divination Cantrip Â· V, S Â· Touch Â· Conc, 1 min',
    body: '<p>You touch one willing creature. Once before the spell ends, the target can roll a d4 and add it to one ability check of its choice. It can roll the die before or after making the check.</p>'
  },
  tollTheDead: {
    title: 'ğŸ”” Toll the Dead',
    meta: 'Necromancy Cantrip Â· V, S Â· 60 ft Â· Instant',
    body: '<p>You point at one creature you can see within range, and the sound of a dolorous bell fills the air around it. The target must succeed on a WIS saving throw (DC 13) or take 1d8 necrotic damage. If the target is missing any HP, it takes 1d12 necrotic damage instead.</p>'
  },
  light: {
    title: 'ğŸ’¡ Light',
    meta: 'Evocation Cantrip Â· V, M Â· Touch Â· 1 hour',
    body: '<p>You touch one object no larger than 10 feet in any dimension. The object sheds bright light in a 20-foot radius and dim light for an additional 20 feet. The light can be colored as you like.</p><p>Covering the object blocks the light. The spell ends if you cast it again or dismiss it as an Action.</p>'
  },
  healingWord: {
    title: 'ğŸ’š Healing Word',
    meta: '1st Level Evocation Â· V Â· Bonus Action Â· 60 ft',
    body: '<p>A creature of your choice that you can see within range regains HP equal to 2d4 + your WIS modifier (+3).</p><p><b>At Higher Levels:</b> +1d4 per slot above 1st.</p>'
  },
  cureWounds: {
    title: 'ğŸ’š Cure Wounds',
    meta: '1st Level Evocation Â· V, S Â· Action Â· Touch',
    body: '<p>A creature you touch regains HP equal to 2d8 + your WIS modifier (+3).</p><p><b>At Higher Levels:</b> +2d8 per slot above 1st.</p>'
  },
  bless: {
    title: 'ğŸ™Œ Bless',
    meta: '1st Level Enchantment Â· V, S, M Â· Conc, 1 min Â· 30 ft',
    body: '<p>You bless up to three creatures of your choice within range. Whenever a target makes an attack roll or saving throw before the spell ends, it can roll a d4 and add it to the result.</p><p><b>At Higher Levels:</b> +1 creature per slot above 1st.</p>'
  },
  shieldOfFaith: {
    title: 'ğŸ›¡ï¸ Shield of Faith',
    meta: '1st Level Abjuration Â· V, S, M Â· Bonus Action Â· Conc, 10 min',
    body: '<p>A shimmering field appears around a creature of your choice within 60 feet, granting it a +2 bonus to AC for the duration.</p>'
  },
  guidingBolt: {
    title: 'âš¡ Guiding Bolt',
    meta: '1st Level Evocation Â· V, S Â· Action Â· 120 ft',
    body: '<p>A flash of light streaks toward a creature of your choice within range. Make a ranged spell attack (+5). On hit: 4d6 radiant damage, and the next attack roll made against this target before the end of your next turn has advantage (the target glimmers with mystic dim light).</p><p><b>At Higher Levels:</b> +1d6 per slot above 1st.</p>'
  },
  spiritualWeapon: {
    title: 'âš”ï¸ Spiritual Weapon',
    meta: '2nd Level Evocation Â· V, S Â· Bonus Action Â· 60 ft Â· 1 min',
    body: '<p>You create a floating, spectral weapon within range that lasts for the duration. When you cast this spell, you can make a melee spell attack (+5) against a creature within 5 ft of the weapon: 1d8 + 3 force damage.</p><p>As a Bonus Action on subsequent turns, you can move the weapon up to 20 ft and repeat the attack.</p><p><b>Not concentration!</b> Great paired with Bless or Spirit Guardians.</p><p><b>At Higher Levels:</b> +1d8 per 2 slot levels above 2nd.</p>'
  },
  holdPerson: {
    title: 'âœ‹ Hold Person',
    meta: '2nd Level Enchantment Â· V, S, M Â· Conc, 1 min Â· 60 ft',
    body: '<p>Choose a humanoid you can see within range. The target must succeed on a WIS saving throw (DC 13) or be Paralyzed for the duration.</p><p>At the end of each of its turns, the target makes another WIS save. On success, the spell ends.</p><p><b>Paralyzed:</b> Auto-fail STR/DEX saves. Attacks have advantage. Melee hits within 5 ft are auto-crits!</p><p><b>At Higher Levels:</b> +1 target per slot above 2nd.</p>'
  },
};

function showDetail(key) {
  const d = details[key];
  if (!d) return;
  document.getElementById('detailTitle').textContent = d.title;
  document.getElementById('detailMeta').textContent = d.meta;
  document.getElementById('detailBody').innerHTML = d.body;
  document.getElementById('detailOverlay').classList.add('show');
}

function hideDetail() {
  document.getElementById('detailOverlay').classList.remove('show');
}

// Save/Load state
function save() {
  const slots = [...document.querySelectorAll('.slot-pip')].map(p => p.classList.contains('filled'));
  const pips = [...document.querySelectorAll('.use-pip')].map(p => p.classList.contains('filled'));
  localStorage.setItem('korin', JSON.stringify({ hp, slots, pips }));
}

function load() {
  const raw = localStorage.getItem('korin');
  if (!raw) return;
  try {
    const data = JSON.parse(raw);
    if (data.hp !== undefined) hp = data.hp;
    if (data.slots) {
      document.querySelectorAll('.slot-pip').forEach((p, i) => {
        if (data.slots[i] !== undefined) p.classList.toggle('filled', data.slots[i]);
      });
    }
    if (data.pips) {
      document.querySelectorAll('.use-pip').forEach((p, i) => {
        if (data.pips[i] !== undefined) p.classList.toggle('filled', data.pips[i]);
      });
    }
  } catch(e) {}
}

// Init
load();
updateHP();
</script>
</body>
</html>
