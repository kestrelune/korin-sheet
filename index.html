<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Korin Emberfall</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#1a1a2e;--card:#16213e;--ch:#1a2744;--acc:#e94560;--gold:#ffd700;--heal:#00cc88;--blue:#4488ff;--txt:#e0e0e0;--dim:#888;--brd:#2a2a4a;--fire:#ff6622;--react:#ff44aa;--ba:#22ccff;--sr:#4466aa;--lr-c:#44aa66}
body{background:var(--bg);color:var(--txt);font-family:'Segoe UI',system-ui,sans-serif;font-size:15px;padding:6px;-webkit-user-select:none;user-select:none}

.hdr{display:flex;align-items:center;gap:12px;padding:4px 8px;border-bottom:1px solid var(--brd);margin-bottom:4px}
.hdr h1{font-size:17px;color:var(--gold)}
.hdr .sub{font-size:11px;color:var(--dim);font-style:italic}
.hdr .cls{font-size:12px;color:var(--acc);margin-left:auto}

.hp{display:flex;align-items:center;gap:5px;background:#111;border-radius:5px;padding:3px 6px;margin-bottom:4px}
.hp .bar{flex:1;height:14px;background:#333;border-radius:7px;overflow:hidden}
.hp .fill{height:100%;border-radius:7px;transition:width .3s}
.hp .val{font-size:16px;font-weight:bold;min-width:48px;text-align:right}
.hp .b{width:22px;height:22px;border-radius:50%;border:1px solid var(--brd);background:var(--card);color:var(--txt);font-size:12px;cursor:pointer;display:flex;align-items:center;justify-content:center}
.hp .b:active{background:var(--acc)}

.stats{display:flex;gap:2px;flex-wrap:wrap;margin-bottom:4px}
.st{background:var(--card);border-radius:3px;padding:2px 6px;text-align:center;flex:1;min-width:44px}
.st .l{font-size:9px;color:var(--dim);text-transform:uppercase}
.st .v{font-size:15px;font-weight:bold}

.slots-row{display:flex;gap:10px;margin-bottom:4px;align-items:center}
.slots{display:flex;gap:2px;align-items:center}
.slots .lbl{font-size:11px;color:var(--dim);min-width:22px}
.sp{width:14px;height:14px;border-radius:3px;border:2px solid #aa66ff;cursor:pointer}
.sp.f{background:#aa66ff}

.grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:5px}
@media(max-width:700px){.grid{grid-template-columns:1fr 1fr}}
@media(max-width:450px){.grid{grid-template-columns:1fr}}
.col{display:flex;flex-direction:column;gap:2px}

.sh{font-size:11px;text-transform:uppercase;letter-spacing:1px;padding:2px 0;border-bottom:1px solid var(--brd);margin-bottom:1px;display:flex;align-items:center;gap:4px}
.sh .tag{font-size:8px;padding:1px 4px;border-radius:3px;font-weight:bold}
.sh .t-act{background:#e94560;color:#fff}
.sh .t-ba{background:#22ccff;color:#000}
.sh .t-react{background:#ff44aa;color:#fff}
.sh .t-free{background:#888;color:#fff}

.card-grid{display:grid;grid-template-columns:1fr 1fr;gap:2px}
.card-grid .a.wide{grid-column:1/-1}

.a{background:var(--card);border-radius:3px;padding:2px 4px;cursor:default;display:flex;flex-direction:column;justify-content:center;min-height:36px;transition:background .1s;position:relative;border:1px solid transparent}
.a:hover{background:var(--ch);border-color:#3a3a5a}
.a .top{display:flex;align-items:center;gap:3px}
.a .ico{font-size:11px;flex-shrink:0}
.a .n{font-size:14px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.a .bot{display:flex;align-items:center;gap:3px;margin-top:1px}
.a .m{font-size:12px;color:var(--dim);white-space:nowrap}
.a .slot{font-size:9px;padding:0px 3px;border-radius:2px;background:#333;color:#ccc;white-space:nowrap}
.a .conc{font-size:9px;padding:0px 3px;background:#553300;color:#ffaa00;border-radius:2px;white-space:nowrap}

/* Upcastable spells â€” click to show level picker */
.a.castable{cursor:pointer}
.a.castable:hover{border-color:#aa66ff55}
.lvl-pick{display:none;position:absolute;z-index:150;left:0;right:0;top:100%;background:#0d1117;border:1px solid #aa66ff;border-radius:0 0 6px 6px;padding:4px 6px;box-shadow:0 4px 12px rgba(0,0,0,.6)}
.lvl-pick.show{display:flex;gap:4px;align-items:center}
.lvl-pick .lp-label{font-size:11px;color:var(--dim)}
.lvl-pick .lp-btn{padding:3px 8px;border-radius:3px;border:1px solid #aa66ff;background:transparent;color:#aa66ff;font-size:11px;cursor:pointer;font-weight:600}
.lvl-pick .lp-btn:hover{background:#aa66ff33}
.lvl-pick .lp-btn.active{background:#aa66ff;color:#000}
.lvl-pick .lp-info{font-size:11px;color:var(--gold);margin-left:auto}
.cast-flash{animation:cflash .4s ease}
@keyframes cflash{0%{background:#aa66ff44}100%{background:var(--card)}}

.pips{display:flex;gap:2px;margin-left:auto}
.pip{width:9px;height:9px;border-radius:50%;border:2px solid var(--dim);cursor:pointer}
.pip.f{border-color:var(--lr-c);background:var(--lr-c)}
.pip.sr.f{border-color:var(--sr);background:var(--sr)}
.pip.sr{border-color:var(--sr)}

.rest-legend{display:flex;gap:8px;font-size:8px;color:var(--dim);margin-bottom:2px;align-items:center}
.rest-legend .dot{width:8px;height:8px;border-radius:50%;display:inline-block}
.rest-legend .dot.sr{background:var(--sr)}
.rest-legend .dot.lr{background:var(--lr-c)}

.tt{display:none;position:fixed;z-index:200;min-width:260px;max-width:340px;background:#0d1117;border:1px solid #3a3a5a;border-radius:6px;padding:8px 10px;pointer-events:none;box-shadow:0 4px 16px rgba(0,0,0,.6)}
.tt.show{display:block}
.a.picker-open .tt{display:none!important}
.tt h3{font-size:14px;color:var(--gold);margin-bottom:2px}
.tt .mt{font-size:11px;color:var(--acc);margin-bottom:4px}
.tt p{font-size:13px;line-height:1.4;margin-bottom:3px;color:var(--txt)}

.sh2{font-size:10px;color:var(--dim);padding:1px 0;margin-top:1px;grid-column:1/-1}

.dr{text-align:center;font-size:20px;font-weight:bold;color:var(--gold);min-height:24px;line-height:24px}
.dice{display:flex;gap:2px;flex-wrap:wrap}
.db{padding:3px 6px;background:var(--card);border:1px solid var(--brd);border-radius:3px;color:var(--txt);font-size:12px;cursor:pointer}
.db:active{background:var(--acc)}

.rest-btns{display:flex;gap:4px;margin-top:4px}
.rbtn{flex:1;padding:5px;border-radius:5px;font-size:13px;cursor:pointer;text-align:center;border:none}
.rbtn.sr-btn{background:#1a2a3a;border:1px solid var(--sr);color:var(--sr)}
.rbtn.sr-btn:active{background:#2a3a5a}
.rbtn.lr-btn{background:#1a3a2a;border:1px solid var(--lr-c);color:var(--lr-c)}
.rbtn.lr-btn:active{background:#2a5a3a}
</style>
</head>
<body>

<div class="hdr">
  <div><h1>âš”ï¸ Korin Emberfall</h1><span class="sub">"The Last Spark of Hope"</span></div>
  <span class="cls">Aasimar Cleric 4 Â· Light Â· Icewind Dale</span>
</div>

<div class="hp">
  <span style="font-size:10px;color:var(--dim)">HP</span>
  <div class="bar"><div class="fill" id="hpF"></div></div>
  <span class="val" id="hpT">25/31</span>
  <button class="b" onclick="chHP(-1)">âˆ’</button>
  <button class="b" onclick="chHP(1)">+</button>
  <button class="b" onclick="chHP(-5)" style="font-size:9px">-5</button>
  <button class="b" onclick="chHP(5)" style="font-size:9px">+5</button>
</div>

<div class="stats">
  <div class="st"><div class="l">AC</div><div class="v">16</div></div>
  <div class="st"><div class="l">Init</div><div class="v">+1</div></div>
  <div class="st"><div class="l">Spd</div><div class="v">30</div></div>
  <div class="st"><div class="l">Prof</div><div class="v">+2</div></div>
  <div class="st"><div class="l">DC</div><div class="v">13</div></div>
  <div class="st"><div class="l">Atk</div><div class="v">+5</div></div>
  <div class="st"><div class="l">STR</div><div class="v">+0</div></div>
  <div class="st"><div class="l">DEX</div><div class="v">+1</div></div>
  <div class="st"><div class="l">CON</div><div class="v">+2</div></div>
  <div class="st"><div class="l">INT</div><div class="v">+1</div></div>
  <div class="st"><div class="l">WIS</div><div class="v">+3</div></div>
  <div class="st"><div class="l">CHA</div><div class="v">+1</div></div>
</div>

<div class="slots-row">
  <div class="slots"><span class="lbl">1st:</span>
    <div class="sp f" data-lvl="1" onclick="tSP(this)"></div><div class="sp f" data-lvl="1" onclick="tSP(this)"></div><div class="sp f" data-lvl="1" onclick="tSP(this)"></div><div class="sp f" data-lvl="1" onclick="tSP(this)"></div>
  </div>
  <div class="slots"><span class="lbl">2nd:</span>
    <div class="sp f" data-lvl="2" onclick="tSP(this)"></div><div class="sp f" data-lvl="2" onclick="tSP(this)"></div><div class="sp f" data-lvl="2" onclick="tSP(this)"></div>
  </div>
  <div class="rest-legend" style="margin-left:12px">
    <span class="dot sr"></span> Short rest
    <span class="dot lr"></span> Long rest
  </div>
</div>

<div class="grid">

<!-- COLUMN 1: ACTIONS -->
<div class="col">
  <div class="sh"><span class="tag t-act">ACTION</span> Your Turn</div>

  <div class="sh2">â€” Cantrips (at will) â€”</div>
  <div class="card-grid">
    <div class="a">
      <div class="top"><span class="ico">ğŸ”¥</span><span class="n">Sacred Flame</span></div>
      <div class="bot"><span class="m">60ft Â· d8 rad Â· DEX</span></div>
      <div class="tt"><h3>ğŸ”¥ Sacred Flame</h3><div class="mt">Cantrip Â· V,S Â· 60ft Â· DEX 13</div><p>1d8 radiant. No cover benefit. 2d8 at level 5.</p></div>
    </div>
    <div class="a">
      <div class="top"><span class="ico">ğŸ””</span><span class="n">Toll the Dead</span></div>
      <div class="bot"><span class="m">60ft Â· d8/d12 Â· WIS</span></div>
      <div class="tt"><h3>ğŸ”” Toll the Dead</h3><div class="mt">Cantrip Â· V,S Â· 60ft Â· WIS 13</div><p>1d8 necrotic. <b>1d12 if target missing HP!</b></p></div>
    </div>
    <div class="a">
      <div class="top"><span class="ico">ğŸ™</span><span class="n">Guidance</span></div>
      <div class="bot"><span class="m">+d4 chk</span><span class="conc">CONC</span></div>
      <div class="tt"><h3>ğŸ™ Guidance</h3><div class="mt">Cantrip Â· V,S Â· Touch Â· Conc 1 min</div><p>+1d4 to one ability check.</p></div>
    </div>
    <div class="a">
      <div class="top"><span class="ico">ğŸ›¡ï¸</span><span class="n">Resistance</span></div>
      <div class="bot"><span class="m">+d4 save</span><span class="conc">CONC</span></div>
      <div class="tt"><h3>ğŸ›¡ï¸ Resistance</h3><div class="mt">Cantrip Â· V,S Â· Touch Â· Conc 1 min</div><p>+1d4 to one saving throw.</p></div>
    </div>
    <div class="a wide">
      <div class="top"><span class="ico">ğŸ’¡</span><span class="n">Light</span><span class="m" style="margin-left:auto">20ft glow Â· 1hr</span></div>
      <div class="tt"><h3>ğŸ’¡ Light</h3><div class="mt">Cantrip Â· V,M Â· Touch Â· 1hr</div><p>Object sheds bright light 20ft + dim 20ft.</p></div>
    </div>
  </div>

  <div class="sh2">â€” 1st Level Spells â€”</div>
  <div class="card-grid">
    <div class="a castable" data-spell="bane" onclick="castSpell(this)">
      <div class="top"><span class="ico">ğŸ˜ˆ</span><span class="n">Bane</span></div>
      <div class="bot"><span class="m" data-base="3 tgt Â· âˆ’d4" data-up="4 tgt Â· âˆ’d4">3 tgt Â· âˆ’d4</span><span class="conc">CONC</span></div>
      <div class="tt"><h3>ğŸ˜ˆ Bane</h3><div class="mt">1st Â· V,S,M Â· 30ft Â· CHA 13 Â· Conc 1 min</div><p>3 creatures subtract 1d4 from attacks and saves.</p><p><b>Upcast 2nd:</b> 4 targets.</p></div>
      <div class="lvl-pick"><span class="lp-label">Cast at:</span><button class="lp-btn" onclick="event.stopPropagation();spend(this,1)">1st</button><button class="lp-btn" onclick="event.stopPropagation();spend(this,2)">2nd</button><span class="lp-info"></span></div>
    </div>
    <div class="a castable" data-spell="bless" onclick="castSpell(this)">
      <div class="top"><span class="ico">ğŸ™Œ</span><span class="n">Bless</span></div>
      <div class="bot"><span class="m" data-base="3 tgt Â· +d4" data-up="4 tgt Â· +d4">3 tgt Â· +d4</span><span class="conc">CONC</span></div>
      <div class="tt"><h3>ğŸ™Œ Bless</h3><div class="mt">1st Â· V,S,M Â· 30ft Â· Conc 1 min</div><p>3 creatures add 1d4 to attacks and saves.</p><p><b>Upcast 2nd:</b> 4 targets.</p></div>
      <div class="lvl-pick"><span class="lp-label">Cast at:</span><button class="lp-btn" onclick="event.stopPropagation();spend(this,1)">1st</button><button class="lp-btn" onclick="event.stopPropagation();spend(this,2)">2nd</button><span class="lp-info"></span></div>
    </div>
    <div class="a castable" data-spell="burnHands" onclick="castSpell(this)">
      <div class="top"><span class="ico">ğŸ”¥</span><span class="n">Burning Hands</span></div>
      <div class="bot"><span class="m" data-base="15ft cone Â· 3d6" data-up="15ft cone Â· 4d6">15ft cone Â· 3d6</span></div>
      <div class="tt"><h3>ğŸ”¥ Burning Hands</h3><div class="mt">1st Â· V,S Â· 15ft cone Â· DEX 13</div><p>3d6 fire, half on save.</p><p><b>Upcast 2nd:</b> 4d6.</p></div>
      <div class="lvl-pick"><span class="lp-label">Cast at:</span><button class="lp-btn" onclick="event.stopPropagation();spend(this,1)">1st</button><button class="lp-btn" onclick="event.stopPropagation();spend(this,2)">2nd</button><span class="lp-info"></span></div>
    </div>
    <div class="a castable" data-spell="faerie" onclick="castSpell(this)">
      <div class="top"><span class="ico">âœ¨</span><span class="n">Faerie Fire</span></div>
      <div class="bot"><span class="m">Adv atks Â· 20ft</span><span class="conc">CONC</span></div>
      <div class="tt"><h3>âœ¨ Faerie Fire</h3><div class="mt">1st Â· V Â· 60ft Â· 20ft cube Â· DEX 13 Â· Conc 1 min</div><p>Failed saves: outlined in light. <b>All attacks against them have advantage.</b> Can't be invisible.</p><p>No damage â€” pure support. But advantage for the <b>whole party</b> for up to 10 rounds is massive action economy.</p><p>ğŸ’ <b>Icewind Dale MVP:</b> Counters invisible stalkers, blizzard obscurement, and hidden enemies.</p></div>
      <div class="lvl-pick"><span class="lp-label">Cast at:</span><button class="lp-btn" onclick="event.stopPropagation();spend(this,1)">1st</button><span class="lp-info"></span></div>
    </div>
    <div class="a castable" data-spell="guidBolt" onclick="castSpell(this)">
      <div class="top"><span class="ico">âš¡</span><span class="n">Guiding Bolt</span></div>
      <div class="bot"><span class="m" data-base="+5 Â· 4d6 rad" data-up="+5 Â· 5d6 rad">+5 Â· 4d6 rad</span></div>
      <div class="tt"><h3>âš¡ Guiding Bolt</h3><div class="mt">1st Â· V,S Â· 120ft Â· +5</div><p>4d6 radiant. Next attack vs target has <b>advantage</b>.</p><p><b>Upcast 2nd:</b> 5d6.</p></div>
      <div class="lvl-pick"><span class="lp-label">Cast at:</span><button class="lp-btn" onclick="event.stopPropagation();spend(this,1)">1st</button><button class="lp-btn" onclick="event.stopPropagation();spend(this,2)">2nd</button><span class="lp-info"></span></div>
    </div>
    <div class="a castable" data-spell="inflict" onclick="castSpell(this)">
      <div class="top"><span class="ico">ğŸ’€</span><span class="n">Inflict Wounds</span></div>
      <div class="bot"><span class="m" data-base="Touch Â· +5 Â· 2d10" data-up="Touch Â· +5 Â· 3d10">Touch Â· +5 Â· 2d10</span></div>
      <div class="tt"><h3>ğŸ’€ Inflict Wounds</h3><div class="mt">1st Â· V,S Â· Touch Â· +5</div><p>2d10 necrotic. Highest 1st-level single target!</p><p><b>Upcast 2nd:</b> 3d10 (avg 16.5).</p></div>
      <div class="lvl-pick"><span class="lp-label">Cast at:</span><button class="lp-btn" onclick="event.stopPropagation();spend(this,1)">1st</button><button class="lp-btn" onclick="event.stopPropagation();spend(this,2)">2nd</button><span class="lp-info"></span></div>
    </div>
  </div>

  <div class="sh2">â€” 2nd Level Spells â€”</div>
  <div class="card-grid">
    <div class="a castable" data-spell="scorchRay" onclick="castSpell(this)">
      <div class="top"><span class="ico">ğŸ”¥ğŸ”¥</span><span class="n">Scorching Ray</span></div>
      <div class="bot"><span class="m">3Ã—2d6 fire</span></div>
      <div class="tt"><h3>ğŸ”¥ğŸ”¥ Scorching Ray</h3><div class="mt">2nd Â· V,S Â· 120ft Â· +5 per ray</div><p>3 rays Ã— 2d6 fire. <b>Max 6d6 (avg 21) single target!</b></p></div>
      <div class="lvl-pick"><span class="lp-label">Cast at:</span><button class="lp-btn" onclick="event.stopPropagation();spend(this,2)">2nd</button><span class="lp-info"></span></div>
    </div>
    <div class="a castable" data-spell="seeInvis" onclick="castSpell(this)">
      <div class="top"><span class="ico">ğŸ‘ï¸</span><span class="n">See Invisibility</span></div>
      <div class="bot"><span class="m">1hr Â· No conc</span></div>
      <div class="tt"><h3>ğŸ‘ï¸ See Invisibility</h3><div class="mt">2nd Â· V,S,M Â· Self Â· 1hr Â· NO concentration</div><p>See invisible creatures + Ethereal Plane.</p></div>
      <div class="lvl-pick"><span class="lp-label">Cast at:</span><button class="lp-btn" onclick="event.stopPropagation();spend(this,2)">2nd</button><span class="lp-info"></span></div>
    </div>
    <div class="a castable wide" data-spell="prayer" onclick="castSpell(this)">
      <div class="top"><span class="ico">ğŸ’š</span><span class="n">Prayer of Healing</span><span class="m" style="margin-left:auto">10min Â· 6Ã—2d8</span></div>
      <div class="tt"><h3>ğŸ’š Prayer of Healing</h3><div class="mt">2nd Â· V Â· 10 min Â· 30ft</div><p>Up to 6 creatures regain 2d8 HP. Out of combat only.</p></div>
      <div class="lvl-pick"><span class="lp-label">Cast at:</span><button class="lp-btn" onclick="event.stopPropagation();spend(this,2)">2nd</button><span class="lp-info"></span></div>
    </div>
    <div class="a castable wide" data-spell="spirWeap" onclick="castSpell(this)">
      <div class="top"><span class="ico">âš”ï¸</span><span class="n">Spiritual Weapon</span><span class="m" style="margin-left:auto">BA Â· +5 Â· d8+3 Â· No conc</span></div>
      <div class="tt"><h3>âš”ï¸ Spiritual Weapon</h3><div class="mt">2nd Â· V,S Â· BA to cast Â· 60ft Â· 1 min</div><p>Melee spell atk +5: 1d8+3 force. <b>NOT concentration!</b></p><p>BA each turn: move 20ft + attack. Pair with any conc spell!</p></div>
      <div class="lvl-pick"><span class="lp-label">Cast at:</span><button class="lp-btn" onclick="event.stopPropagation();spend(this,2)">2nd</button><span class="lp-info"></span></div>
    </div>
  </div>

  <div class="sh2">â€” Features (Action) â€”</div>
  <div class="card-grid">
    <div class="a">
      <div class="top"><span class="ico">ğŸ¤²</span><span class="n">Healing Hands</span></div>
      <div class="bot"><span class="m">2d4</span><div class="pips"><div class="pip f" onclick="event.stopPropagation();tP(this)"></div></div></div>
      <div class="tt"><h3>ğŸ¤² Healing Hands</h3><div class="mt">Magic Action Â· Touch Â· 1/Long Rest</div><p>Roll 2d4. Target regains that many HP.</p></div>
    </div>
    <div class="a">
      <div class="top"><span class="ico">ğŸ”†</span><span class="n">Channel Divinity</span></div>
      <div class="bot"><span class="m">Turn / Radiance</span><div class="pips"><div class="pip sr f" onclick="event.stopPropagation();tP(this)"></div></div></div>
      <div class="tt"><h3>ğŸ”† Channel Divinity</h3><div class="mt">Action Â· 1/Short Rest</div><p><b>Turn Undead:</b> 30ft WIS save or turned 1 min.</p><p><b>Radiance of the Dawn:</b> 30ft CON save: <b>2d10+4 radiant</b>. Half on save. <b>Allies unaffected!</b></p></div>
    </div>
  </div>
</div>

<!-- COLUMN 2: BONUS + REACTIONS -->
<div class="col">
  <div class="sh"><span class="tag t-ba">BONUS</span> Same Turn</div>

  <div class="card-grid">
    <div class="a wide">
      <div class="top"><span class="ico">âš”ï¸</span><span class="n">SW Atk (subsequent)</span><span class="m" style="margin-left:auto">20ft move + d8+3</span></div>
      <div class="tt"><h3>âš”ï¸ Spiritual Weapon Attack</h3><div class="mt">Bonus Action each turn (already cast)</div><p>Move weapon 20ft + melee spell attack +5: 1d8+3 force. Free damage every turn!</p></div>
    </div>
    <div class="a castable" data-spell="shield" onclick="castSpell(this)">
      <div class="top"><span class="ico">ğŸ›¡ï¸</span><span class="n">Shield of Faith</span></div>
      <div class="bot"><span class="m">+2 AC</span><span class="conc">CONC</span></div>
      <div class="tt"><h3>ğŸ›¡ï¸ Shield of Faith</h3><div class="mt">1st Â· V,S,M Â· BA Â· 60ft Â· Conc 10 min</div><p>+2 AC to target. Concentration â€” can't stack with Bless/Bane/Faerie Fire.</p></div>
      <div class="lvl-pick"><span class="lp-label">Cast at:</span><button class="lp-btn" onclick="event.stopPropagation();spend(this,1)">1st</button><span class="lp-info"></span></div>
    </div>
    <div class="a">
      <div class="top"><span class="ico">âœ¨</span><span class="n">Celestial Rev.</span></div>
      <div class="bot"><span class="m">1min Â· choose form</span><div class="pips"><div class="pip f" onclick="event.stopPropagation();tP(this)"></div></div></div>
      <div class="tt"><h3>âœ¨ Celestial Revelation</h3><div class="mt">Bonus Action Â· 1 min Â· 1/Long Rest</div><p>Pick one form. <b>ALL forms</b> grant once/turn <b>+2 radiant</b> on any damage you deal.</p><p>ğŸ•Šï¸ <b>Wings:</b> Gain fly speed = walk speed. +2 radiant/turn.</p><p>ğŸ’› <b>Inner Radiance:</b> End of your turn, you + allies in 10ft heal 1 HP. +2 radiant/turn.</p><p>ğŸ’€ <b>Necrotic Shroud:</b> 10ft enemies CHA save (DC 11) or Frightened 1 turn. Once/turn <b>+2 necrotic AND +2 radiant = +4 total</b>. Best damage pick.</p></div>
    </div>
  </div>

  <div class="sh" style="margin-top:4px"><span class="tag t-react">REACTION</span> Others' Turns</div>

  <div class="card-grid">
    <div class="a wide">
      <div class="top"><span class="ico">ğŸ’¥</span><span class="n">Warding Flare</span><span class="m" style="margin-left:auto">Disadv on atk Â· 30ft</span><div class="pips"><div class="pip f" onclick="event.stopPropagation();tP(this)"></div><div class="pip f" onclick="event.stopPropagation();tP(this)"></div><div class="pip f" onclick="event.stopPropagation();tP(this)"></div></div></div>
      <div class="tt"><h3>ğŸ’¥ Warding Flare</h3><div class="mt">Reaction Â· 3/Long Rest</div><p>When attacked by creature within 30ft: <b>impose disadvantage</b> on attack roll. Immune if attacker can't be Blinded.</p></div>
    </div>
  </div>

  <div class="sh" style="margin-top:4px"><span class="tag t-free">PASSIVE</span> Always On</div>

  <div class="card-grid">
    <div class="a">
      <div class="top"><span class="ico">ğŸ›¡ï¸</span><span class="n">Resist Nec/Rad</span></div>
      <div class="bot"><span class="m">Â½ dmg</span></div>
      <div class="tt"><h3>ğŸ›¡ï¸ Celestial Resistance</h3><div class="mt">Passive</div><p>Resistance to necrotic & radiant (half damage).</p></div>
    </div>
    <div class="a">
      <div class="top"><span class="ico">ğŸ‘ï¸</span><span class="n">Darkvision</span></div>
      <div class="bot"><span class="m">60ft</span></div>
      <div class="tt"><h3>ğŸ‘ï¸ Darkvision</h3><div class="mt">Passive Â· 60ft</div><p>Dim as bright, dark as dim.</p></div>
    </div>
  </div>

  <div class="sh" style="margin-top:6px">âš¡ Combat Combos</div>
  <div class="card-grid">
    <div class="a wide">
      <div class="top"><span class="ico">ğŸ’¡</span><span class="n">Opener: SW + Bless</span><span class="m" style="margin-left:auto">T1</span></div>
      <div class="tt"><h3>ğŸ’¡ Opener: Spiritual Weapon + Bless</h3><div class="mt">Turn 1 Setup</div><p><b>Action:</b> Bless (conc) 3 allies â†’ +1d4</p><p><b>Bonus:</b> Spiritual Weapon â†’ d8+3</p><p>Then: cantrip + SW every turn. Costs 1st + 2nd.</p></div>
    </div>
    <div class="a wide">
      <div class="top"><span class="ico">ğŸ”¥</span><span class="n">Nova: Scorch Ray + SW</span><span class="m" style="margin-left:auto">T2+ Â· ~28 avg</span></div>
      <div class="tt"><h3>ğŸ”¥ Nova: Scorching Ray + SW Attack</h3><div class="mt">Turn 2+ Damage</div><p><b>Action:</b> Scorching Ray â†’ 3Ã—2d6 (avg 21)</p><p><b>Bonus:</b> SW attack â†’ d8+3 (avg 7.5)</p><p>Total: avg ~28 damage. Your max burst.</p></div>
    </div>
    <div class="a wide">
      <div class="top"><span class="ico">âœ¨</span><span class="n">Faerie Fire + SW + cantrip</span><span class="m" style="margin-left:auto">Adv</span></div>
      <div class="tt"><h3>âœ¨ Control: Faerie Fire + SW + Cantrip</h3><div class="mt">Advantage Enabler</div><p><b>T1:</b> Faerie Fire (conc) + SW (BA)</p><p><b>T2+:</b> Cantrip + SW attack. Party gets advantage.</p></div>
    </div>
    <div class="a wide">
      <div class="top"><span class="ico">ğŸ”†</span><span class="n">Radiance of Dawn (AoE)</span><span class="m" style="margin-left:auto">2d10+4</span></div>
      <div class="tt"><h3>ğŸ”† AoE: Radiance of the Dawn</h3><div class="mt">Channel Divinity Â· Action</div><p>2d10+4 radiant to ALL hostiles in 30ft. Dispels magical darkness. Doesn't hurt allies.</p></div>
    </div>
  </div>
</div>

<!-- COLUMN 3: DICE + SAVES -->
<div class="col">
  <div class="sh">ğŸ² Quick Roll</div>
  <div class="dr" id="dR">â€”</div>
  <div class="dice">
    <button class="db" onclick="rl(20,1,0)">d20</button>
    <button class="db" onclick="rl(20,1,5)">Atk+5</button>
    <button class="db" onclick="rl(8,1,3)">d8+3</button>
    <button class="db" onclick="rl(6,4,0)">4d6</button>
    <button class="db" onclick="rl(6,6,0)">6d6</button>
    <button class="db" onclick="rl(10,2,0)">2d10</button>
    <button class="db" onclick="rl(10,3,0)">3d10</button>
    <button class="db" onclick="rl(8,2,0)">2d8</button>
    <button class="db" onclick="rl(4,2,0)">2d4</button>
    <button class="db" onclick="rl(4,1,0)">d4</button>
    <button class="db" onclick="rl(10,2,4)">Rad.Dawn</button>
  </div>

  <div class="sh" style="margin-top:6px">Saving Throws</div>
  <div style="display:flex;flex-wrap:wrap;gap:2px">
    <div class="st" style="min-width:55px"><div class="l">STR</div><div class="v">+0</div></div>
    <div class="st" style="min-width:55px"><div class="l">DEX</div><div class="v">+1</div></div>
    <div class="st" style="min-width:55px"><div class="l">CON</div><div class="v">+2</div></div>
    <div class="st" style="min-width:55px"><div class="l">INT</div><div class="v">+1</div></div>
    <div class="st" style="min-width:55px;background:#2a2a4a"><div class="l" style="color:var(--gold)">WIS â—</div><div class="v">+5</div></div>
    <div class="st" style="min-width:55px;background:#2a2a4a"><div class="l" style="color:var(--gold)">CHA â—</div><div class="v">+3</div></div>
  </div>

  <div class="sh" style="margin-top:6px">Skills (proficient)</div>
  <div style="font-size:12px;color:var(--dim);line-height:1.8">
    <b style="color:var(--txt)">Deception</b> +3 Â· <b style="color:var(--txt)">Insight</b> +5 Â· <b style="color:var(--txt)">Medicine</b> +5 Â· <b style="color:var(--txt)">Religion</b> +6
  </div>

  <div class="sh" style="margin-top:6px">ğŸ“ Notes</div>
  <div style="font-size:11px;color:var(--dim);line-height:1.6">
    <div>â€¢ Spiritual Weapon: <b style="color:var(--gold)">NOT concentration</b> â€” stack with Bless/Faerie Fire!</div>
  </div>
</div>

</div>

<div class="rest-btns">
  <button class="rbtn sr-btn" onclick="shortRest()">â³ Short Rest</button>
  <button class="rbtn lr-btn" onclick="longRest()">ğŸŒ™ Long Rest</button>
</div>

<script>
let hp=25;const mx=31;
function upHP(){document.getElementById('hpT').textContent=`${hp}/${mx}`;const p=hp/mx*100,f=document.getElementById('hpF');f.style.width=p+'%';f.style.background=p>50?'#44cc66':p>25?'#ccaa33':'#cc3344'}
function chHP(d){hp=Math.max(0,Math.min(mx,hp+d));upHP();sv()}
function tSP(e){e.classList.toggle('f');sv()}
function tP(e){e.classList.toggle('f');sv()}
function rl(s,c,m){let t=0,r=[];for(let i=0;i<c;i++){const v=Math.floor(Math.random()*s)+1;r.push(v);t+=v}t+=m;const ms=m?`+${m}`:'';const n=c===1&&s===20?(r[0]===20?' NAT 20! ğŸ‰':r[0]===1?' NAT 1 ğŸ’€':''):'';const e=document.getElementById('dR');e.textContent=`${t} [${r.join('+')}${ms}]${n}`;e.style.color=n.includes('20')?'#0f8':n.includes('1')?'#f44':'#ffd700'}

// Spell casting: click to open level picker, pick level to spend slot
let openPicker=null;
function castSpell(card){
  const pick=card.querySelector('.lvl-pick');
  if(openPicker&&openPicker!==pick){openPicker.classList.remove('show');openPicker.parentElement.classList.remove('picker-open')}
  pick.classList.toggle('show');
  card.classList.toggle('picker-open');
  openPicker=pick.classList.contains('show')?pick:null;
  // Update info text with available slots
  if(openPicker){
    pick.querySelectorAll('.lp-btn').forEach(btn=>{
      const lvl=parseInt(btn.textContent);
      const avail=[...document.querySelectorAll(`.sp[data-lvl="${lvl}"].f`)].length;
      btn.style.opacity=avail>0?'1':'0.3';
    });
  }
}
function spend(btn,lvl){
  // Find a filled slot of this level and spend it
  const slot=[...document.querySelectorAll(`.sp[data-lvl="${lvl}"].f`)].pop();
  if(!slot){return}
  slot.classList.remove('f');
  // Update the card's displayed meta if upcast
  const card=btn.closest('.a');
  const meta=card.querySelector('.m[data-base]');
  if(meta){
    if(lvl>=2&&meta.dataset.up){
      meta.textContent=meta.dataset.up;
      meta.style.color='#aa66ff';
      setTimeout(()=>{meta.textContent=meta.dataset.base;meta.style.color=''},2000);
    }
  }
  // Flash and close
  card.classList.add('cast-flash');
  setTimeout(()=>card.classList.remove('cast-flash'),400);
  const pick=card.querySelector('.lvl-pick');
  pick.classList.remove('show');
  card.classList.remove('picker-open');
  openPicker=null;
  sv();
}
// Tooltip positioning â€” flip above if would go below viewport
document.querySelectorAll('.a').forEach(card=>{
  const tt=card.querySelector('.tt');
  if(!tt)return;
  card.addEventListener('mouseenter',()=>{
    if(card.classList.contains('picker-open'))return;
    const r=card.getBoundingClientRect();
    tt.style.left=r.left+'px';
    tt.classList.add('show');
    // Measure after showing
    const tr=tt.getBoundingClientRect();
    const below=r.bottom+4;
    const above=r.top-tr.height-4;
    if(below+tr.height>window.innerHeight&&above>=0){
      tt.style.top=above+'px';
    }else{
      tt.style.top=below+'px';
    }
    // Clamp left
    if(r.left+tr.width>window.innerWidth){
      tt.style.left=(window.innerWidth-tr.width-8)+'px';
    }
  });
  card.addEventListener('mouseleave',()=>{
    tt.classList.remove('show');
  });
});

// Close picker on outside click
document.addEventListener('click',e=>{
  if(openPicker&&!e.target.closest('.a.picker-open')){
    openPicker.classList.remove('show');
    openPicker.parentElement.classList.remove('picker-open');
    openPicker=null;
  }
});

function shortRest(){document.querySelectorAll('.pip.sr').forEach(p=>p.classList.add('f'));document.getElementById('dR').textContent='â³ Short Rest!';document.getElementById('dR').style.color='#4466aa';sv()}
function longRest(){hp=mx;upHP();document.querySelectorAll('.sp,.pip').forEach(p=>p.classList.add('f'));document.getElementById('dR').textContent='ğŸŒ™ Full Restore!';document.getElementById('dR').style.color='#0c8';sv()}

function sv(){const s=[...document.querySelectorAll('.sp')].map(p=>p.classList.contains('f'));const p=[...document.querySelectorAll('.pip')].map(p=>p.classList.contains('f'));localStorage.setItem('korin',JSON.stringify({hp,s,p}))}
function ld(){const r=localStorage.getItem('korin');if(!r)return;try{const d=JSON.parse(r);if(d.hp!==undefined)hp=d.hp;if(d.s)document.querySelectorAll('.sp').forEach((p,i)=>{if(d.s[i]!==undefined)p.classList.toggle('f',d.s[i])});if(d.p)document.querySelectorAll('.pip').forEach((p,i)=>{if(d.p[i]!==undefined)p.classList.toggle('f',d.p[i])})}catch(e){}}
ld();upHP();
</script>
</body>
</html>
